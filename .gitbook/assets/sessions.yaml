post:
  tags:
    - Call Session
  operationId: createCallSession
  summary: Create call session
  description: |
    Create call session
  requestBody:
    content:
      application/json:
        schema:
          type: object
          properties:
            caller:
              $ref: "../components/schemas/cdr.yaml#/caller"
            caller_display_name:
              $ref: "../components/schemas/cdr.yaml#/caller_display_name"
            callee:
              $ref: "../components/schemas/cdr.yaml#/callee"
            send_sdp:
              $ref: "../components/schemas/session.yaml#/send_sdp"
            trunk:
              $ref: "../components/schemas/provider.yaml#/name"
            rewrite_from:
              $ref: "../components/schemas/session.yaml#/rewrite_from"
            rewrite_pai:
              $ref: "../components/schemas/session.yaml#/rewrite_pai"
            rewrite_rpi:
              $ref: "../components/schemas/session.yaml#/rewrite_rpi"
            user_data:
              $ref: "../components/schemas/session.yaml#/user_data"
            target:
               $ref: "../components/schemas/session.yaml#/target"
            additional_header:
               $ref: "../components/schemas/session.yaml#/additional_header"
            header_direction:
               $ref: "../components/schemas/session.yaml#/header_direction"
          required:
            - caller
            - callee
            - send_sdp
    required: true
  responses:
    "201":
      description: OK
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                $ref: "../components/schemas/session.yaml#/id"
    "4XX":
      description: Error
get:
  tags:
    - Call Session
  operationId: listCallSessions
  summary: List current active call sessions.
  description: |
    Get a collection of current active call sessions.
  responses:
    "201":
      description: OK
      content:
        application/json:
          schema:
            type: object
            properties:
              count:
                $ref: "../components/schemas/common.yaml#/count"
              items:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      $ref: "../components/schemas/session.yaml#/id"
                    calls:
                      type: array
                      items:
                        $ref: "../components/schemas/session.yaml#/info"
    "4XX":
      description: Error
