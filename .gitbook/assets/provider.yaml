id:
  allOf:
    - $ref: "../../components/schemas/common.yaml#/id"
  description: |
    The unique ID of trunk.
name:
  type: string
  minLength: 1
  maxLength: 64
  description: |
    The name of the trunk.
enabled:
  type: boolean
  default: true
  description: |
    Whether to enable the provider.
brand:
  type: string
  minLength: 1
  maxLength: 64
  description: |
    The brand of trunk.
auth_mode:
  type: string
  enum:
    - IP_AUTH
    - REGISTER_AUTH
    - ACCEPT_REGISTER
    - TEAMS
  description: |
    Authentication mode:  
    Can be either:  
    - `IP_AUTH`:
    - `REGISTER_AUTH`:
    - `ACCEPT_REGISTER`:
    - `TEAMS`:
transport:
  type: string
  enum:
    - UDP
    - TCP
    - TLS
  description: |
    The trunk transport protocol:  
    Can be either:  
    - `UDP`:
    - `TCP`:
    - `TLS`:
hostname:
  allOf:
    - $ref: "../../components/schemas/common.yaml#/hostname"
  description: |
    The hostname of trunk.
port:
  allOf:
    - $ref: "../../components/schemas/common.yaml#/port"
  description: |
    The port pf trunk.
auth_id:
  type: string
  maxLength: 64
  description: |
    Authentication ID, i.e. SIP username.
username:
  type: string
  maxLength: 64
  description: |
    Authentication username.
password:
  type: string
  description: |
    Password for authentication.
register_interval:
  type: integer
  format: int32
  minimum: 0
  default: 600
  description: |
    Interval for registry refreshment, in seconds.
registration:
  type: boolean
  default: true
  description: |
    Whether registration is required.
outbound_server:
  type: string
  description: |
    The outbound server hostname of the trunk.
outbound_server_port:
  allOf:
    - $ref: "../../components/schemas/common.yaml#/port"
  description: |
    The outbound server port of the trunk.
inlan:
  type: boolean
  default: false
  description: |
    Whether the trunk under LAN or not.
single_via_header:
  type: boolean
  default: true
  description: |
    Whether this trunk is only accept single Via SIP header or not.
rewrite_via_ip:
  type: boolean
  default: true
  description: |
    Rewrite the host IP of Via header by public IP when sending the request to trunk.
verify_port:
  type: boolean
  default: true
  description: |
    Verify the port when receiving SIP messages from trunk
keep_alive:
  type: boolean
  default: true
  description: |
    Send `OPTIONS` message for keep alive.
keep_alive_interval:
  type: integer
  format: int32
  minimum: 0
  default: 360
  description: |
    Keep alive message sending interval (seconds).
concurrency:
  type: integer
  format: int32
  minimum: 0
  description: |
    The max number of concurrent calls.
additional_ips:
  type: string
  description: |
    The additional IP addresses of provider.   
    A semicolon-separated list of IP addresses in CIDR format.   
    For example: 192.0.2.0/24;192.0.2.0/32 as defined in RFC 4632 and RFC 4291.
adjust_sdp_direction:
  type: boolean
  default: true
  description: |
    Adjust the SDP direction for call hold.
remove_srtp_info:
  type: boolean
  default: true
  description: |
    Remove crypto line in the SDP.
privacy_types_supported:
  type: string
  enum:
    - ID
    - USER
    - HEADER
    - DEFAULT
  description: |
    Inbound parameters:
    - `ID`: id
    - `USER`: user
    - `HEADER`: header
    - `DEFAULT`: leave default value.
inbound_variable:
  type: string
  enum:
    - REQUEST_LINE_URI_USER_PART
    - CONTACT_USER_PART
    - TO_DISPLAY_NAME
    - TO_USER_PART
    - FROM_DISPLAY_NAME
    - FROM_USER_PART
    - REMOTE_PARTY_ID_CALLED_PARTY_DISPLAY_NAME
    - REMOTE_PARTY_ID_CALLED_PARTY_USER_PART
    - REMOTE_PARTY_ID_CALLING_PARTY_DISPLAY_NAME
    - REMOTE_PARTY_ID_CALLING_PARTY_USER_PART
    - P_ASSERTED_IDENTITY_DISPLAY_NAME
    - P_ASSERTED_IDENTITY_USER_PART
    - P_PREFERRED_IDENTIFY_DISPLAY_NAME
    - P_PREFERRED_IDENTIFY_USER_PART
    - P_CALLED_PARTY_ID_DISPLAY_NAME
    - P_CALLED_PARTY_ID_USER_PART
    - DEFAULT
  description: |
    Inbound parameters:
    - `REQUEST_LINE_URI_USER_PART`:
    - `CONTACT_USER_PART`:
    - `TO_DISPLAY_NAME`:
    - `TO_USER_PART`:
    - `FROM_DISPLAY_NAME`:
    - `FROM_USER_PART`:
    - `REMOTE_PARTY_ID_CALLED_PARTY_DISPLAY_NAME`:
    - `REMOTE_PARTY_ID_CALLED_PARTY_USER_PART`:
    - `REMOTE_PARTY_ID_CALLING_PARTY_DISPLAY_NAME`:
    - `REMOTE_PARTY_ID_CALLING_PARTY_USER_PART`:
    - `P_ASSERTED_IDENTITY_DISPLAY_NAME`:
    - `P_ASSERTED_IDENTITY_USER_PART`:
    - `P_PREFERRED_IDENTIFY_DISPLAY_NAME`:
    - `P_PREFERRED_IDENTIFY_USER_PART`:
    - `P_CALLED_PARTY_ID_DISPLAY_NAME`:
    - `P_CALLED_PARTY_ID_USER_PART`:
    - `DEFAULT`:
inbound_parameters:
  type: object
  properties:
    caller_num:
      $ref: "#/inbound_variable"
    caller_display_name:
      $ref: "#/inbound_variable"
    called_num:
      $ref: "#/inbound_variable"
    privacy_types_supported:
      $ref: "#/privacy_types_supported"
outbound_variable_user:
  type: string
  enum:
    - AUTH_ID
    - CALLER_NUM
    - CALLED_NUM
    - CALLER_DISPLAY_NAME
    - OUTBOUND_CALLER_ID
    - ORIGINATOR_CALLER_ID
    - OUTBOUND_CALLER_ID_AND_ORIGINATOR_CALLER_ID
    - ANONYMOUS
    - DEFAULT
    - CUSTOM
  description: |
    Inbound parameters:
    - `AUTH_ID`:
    - `CALLER_NUM`:
    - `CALLED_NUM`:
    - `CALLER_DISPLAY_NAME`:
    - `OUTBOUND_CALLER_ID`:
    - `ORIGINATOR_CALLER_ID`:
    - `OUTBOUND_CALLER_ID_AND_ORIGINATOR_CALLER_ID`:
    - `ANONYMOUS`:
    - `DEFAULT`: leave default value.
    - `CUSTOM`:
outbound_variable_display_name:
  $ref: "#/outbound_variable_user"
outbound_variable_host:
  type: string
  enum:
    - TRUNK_HOST_PORT
    - OUT_HOST_PORT
    - CONTACT_URI
    - SIP_DOMAIN
    - DEFAULT
    - CUSTOM
  description: |
    Inbound parameters variable:
    - `TRUNK_HOST_PORT`:
    - `OUT_HOST_PORT`:
    - `CONTACT_URI`:
    - `SIP_DOMAIN`:
    - `DEFAULT`: leave default value.
    - `CUSTOM`:
custom_value:
  type: string
  description: |
    Custom value for the field.
outbound_parameters:
  type: object
  properties:
    request_line_uri_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    request_line_uri_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    contact_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    contact_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    to_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    to_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    to_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    from_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    from_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    from_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_called_party_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_called_party_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_called_party_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_calling_party_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_calling_party_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    remote_party_id_calling_party_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    p_asserted_identity_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    p_asserted_identity_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    p_asserted_identity_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    p_preferred_identify_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    p_preferred_identify_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    p_preferred_identify_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    p_called_party_id_display_name:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_display_name"
        custom_value:
          $ref: "#/custom_value"
    p_called_party_id_user_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_user"
        custom_value:
          $ref: "#/custom_value"
    p_called_party_id_host_part:
      type: object
      properties:
        value:
          $ref: "#/outbound_variable_host"
        custom_value:
          $ref: "#/custom_value"
    privacy_types_supported:
      type: object
      properties:
        value:
          $ref: "#/privacy_types_supported"
shared:
  type: boolean
  description: |
    The flag of whether the trunk is shared.
status:
  type: string
  enum:
    - REGISTERED
    - UNREGISTERED
  readOnly: true
  description: |
    Trunk status includes:
    - `REGISTERED`:
    - `UNREGISTERED`:
did_numbers:
  type: string
  description: |
    The semicolon-separated list of DID/DDI pool number range or DID/DDI number.
    Assign a DID/DDI pool number range or DID/DDI number to the tenant.
    For example: 3000;12000-18000.
    The DID/DDI pool number range should not overlap with other tenant DID/DDI pool number ranges and numbers.
outbound_caller_id:
  type: string
  minLength: 1
  maxLength: 64
  description: |
    Outbound caller id.
outbound_caller_ids:
  type: array
  items:
    type: object
    properties:
      provider_id:
        allOf:
          - $ref: "#/id"
        description: |
          The unique ID of trunk.
      caller_id:
        allOf:
          - $ref: "#/outbound_caller_id"
        description: |
          The caller ID.
      description:
        type: string
        maxLength: 1024
        description: |
          The descriptive information about this outbound caller id.
  description: |
    A collection of outbound caller IDs.
